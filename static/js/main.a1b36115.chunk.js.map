{"version":3,"sources":["Components/SelectDish/SelectDish.js","helpers.js","Components/Order/Order.js","Components/ErrorMessage/ErrorMessage.js","Components/App/App.js","index.js"],"names":["SelectDish","props","react_default","a","createElement","className","onSubmit","handleSubmit","Object","keys","menu","map","course","key","toUpperCase","dish","id","htmlFor","name","value","type","checked","areRadioChecked","onChange","handleRadio","user","formatPrice","pence","toLocaleString","style","currency","Order","total","currentOrder","length","values","reduce","price","totalForTwo","order","Fragment","ErrorMessage","error","App","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","changeRadio","setState","event","target","meal","state","find","preventDefault","_this$state","restaurantRules","setTimeout","data","_this$state2","areTwoOrMoreOrdered","isMainOrdered","mains","desserts","starters","_this$state3","React","Component","ReactDOM","render","App_App_App","document","getElementById"],"mappings":"uNAEe,SAASA,EAAWC,GACjC,OACEC,EAAAC,EAAAC,cAAA,OAAKC,UAAU,QACbH,EAAAC,EAAAC,cAAA,QAAME,SAAUL,EAAMM,cACnBC,OAAOC,KAAKR,EAAMS,MAAMC,IAAI,SAAAC,GAC3B,OACEV,EAAAC,EAAAC,cAAA,YAAUS,IAAKD,GACbV,EAAAC,EAAAC,cAAA,cAASQ,EAAOE,eACfb,EAAMS,KAAKE,GAAQD,IAAI,SAAAI,GACtB,OACEb,EAAAC,EAAAC,cAAA,OAAKS,IAAKE,EAAKC,IACbd,EAAAC,EAAAC,cAAA,SAAOa,QAASF,EAAKC,GAAIH,IAAKE,EAAKC,IACjCd,EAAAC,EAAAC,cAAA,SACEC,UAAWU,EAAKG,KAChBL,IAAKE,EAAKC,GACVE,KAAMN,EACNO,MAAOJ,EAAKG,KACZE,KAAK,QACLC,QAASpB,EAAMqB,gBACfC,SAAUtB,EAAMuB,cAEjBT,EAAKG,YAQnBjB,EAAMwB,KAAO,EAAIvB,EAAAC,EAAAC,cAAA,uBAAyB,OC/B5C,SAASsB,EAAYC,GAC1B,OAAOA,EAAMC,eAAe,QAAS,CACnCC,MAAO,WACPC,SAAU,QCDC,SAASC,EAAM9B,GAC5B,IAAI+B,EAEFA,EAD6C,IAA3CxB,OAAOC,KAAKR,EAAMgC,cAAcC,OAC1B1B,OAAO2B,OAAOlC,EAAMgC,cAAcG,OAAO,SAACJ,EAAOb,GACvD,OAAOa,EAAQb,EAAMkB,OACpB,GAEK,EAGV,IAAIC,EAAc9B,OAAO2B,OAAOlC,EAAMsC,OAAOH,OAC3C,SAACJ,EAAOb,GAAR,OACEa,EACAxB,OAAO2B,OAAOhB,GAAOiB,OAAO,SAACJ,EAAOb,GAClC,OAAOa,EAAQb,EAAMkB,OACpB,IACL,GAGF,OACEnC,EAAAC,EAAAC,cAACF,EAAAC,EAAMqC,SAAP,KACEtC,EAAAC,EAAAC,cAAA,WACCH,EAAMwB,KAAO,EAAIvB,EAAAC,EAAAC,cAAA,OAAKC,UAAU,iBAAgBH,EAAAC,EAAAC,cAAA,6BAAqBH,EAAMwB,MAAUvB,EAAAC,EAAAC,cAAA,aAAQsB,EAAYM,IAAxF,KAAiH,MAInI9B,EAAAC,EAAAC,cAAA,OAAKC,UAAU,eACfH,EAAAC,EAAAC,cAAA,0BACAF,EAAAC,EAAAC,cAAA,aAAQsB,EAAYY,MC5BX,SAASG,EAAaxC,GAEjC,OAAOC,EAAAC,EAAAC,cAAA,OAAKC,UAAU,WAAWJ,EAAMyC,WCEtBC,cACnB,SAAAA,IAAc,IAAAC,EAAA,OAAApC,OAAAqC,EAAA,EAAArC,CAAAsC,KAAAH,IACZC,EAAApC,OAAAuC,EAAA,EAAAvC,CAAAsC,KAAAtC,OAAAwC,EAAA,EAAAxC,CAAAmC,GAAAM,KAAAH,QAcFI,YAAc,WACZN,EAAKO,SAAS,CAAE7B,gBAAiB,QAhBrBsB,EAmBdpB,YAAc,SAAA4B,GACZ,IAAIxC,EAASwC,EAAMC,OAAOnC,KACtBoC,EAAOV,EAAKW,MAAM7C,KAAKE,GAAQ4C,KACjC,SAAAF,GAAI,OAAIA,EAAKpC,OAASkC,EAAMC,OAAOlC,QAEjCc,EAAeW,EAAKW,MAAMtB,aAC9BA,EAAarB,GAAU0C,EACvBV,EAAKO,SAAS,CAAElB,eAAcS,OAAO,KA1BzBE,EA0DdrC,aAAe,SAAA6C,GACbA,EAAMK,iBADgB,IAAAC,EAEcd,EAAKW,MAAnCtB,EAFgByB,EAEhBzB,aAAcM,EAFEmB,EAEFnB,MAAOd,EAFLiC,EAEKjC,KACvBiB,EAAQE,EAAKe,kBACbjB,EACFT,EAAe,IAEfM,EAAMd,GAAQQ,EACdR,GAAQ,GAGVmB,EAAKO,SAAS,CACZZ,QACAN,aAAc,GACdS,QACAjB,OACAH,iBAAiB,IAIfG,EAAO,GAAImC,WAAW,WAAQhB,EAAKM,eAAe,EAAE,IA5ExDN,EAAKW,MAAQ,CACX7C,KAAM,GACNe,KAAM,EACNQ,aAAc,GACdM,MAAO,GACPG,OAAO,EACPpB,gBAAiB,MARPsB,mFAaZE,KAAKK,SAAS,CAAEzC,KAAMmD,8CAgBN,IAAAC,EAC2BhB,KAAKS,MAA1CtB,EADU6B,EACV7B,aAAcS,EADJoB,EACIpB,MAAOjB,EADXqC,EACWrC,KAAMc,EADjBuB,EACiBvB,MAE7BwB,EAAsBvD,OAAOC,KAAKwB,GAAcC,OAAS,EACzD8B,GAAiB/B,EAAagC,MACnC,GAAY,IAATxC,GAAcc,EAAM,GAAG2B,UAAYjC,EAAaiC,SACS,eAA3B3B,EAAM,GAAG2B,SAAShD,MAAwD,eAA/Be,EAAaiC,SAAShD,OAE3FwB,EAAQ,uDAIT,GAAIqB,EACPrB,EAAQ,wCACH,GAAIsB,EACTtB,EAAQ,8BACH,GAAIT,EAAakC,UAAYlC,EAAagC,MAAO,CAErB,mBAA/BhC,EAAakC,SAASjD,MACM,kBAA5Be,EAAagC,MAAM/C,OAGnBwB,EAAQ,uEAIZ,OAAOA,mCAyBA,IAAA0B,EAQHtB,KAAKS,MANP7C,EAFK0D,EAEL1D,KACAY,EAHK8C,EAGL9C,gBACAG,EAJK2C,EAIL3C,KACAc,EALK6B,EAKL7B,MACAN,EANKmC,EAMLnC,aACAS,EAPK0B,EAOL1B,MAEF,OACExC,EAAAC,EAAAC,cAAA,OAAKC,UAAU,OACfH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,aACbH,EAAAC,EAAAC,cAACJ,EAAD,CACEU,KAAMA,EACNc,YAAasB,KAAKtB,YAClBjB,aAAcuC,KAAKvC,aACnBe,gBAAiBA,EACjBG,KAAMA,IAERvB,EAAAC,EAAAC,cAAC2B,EAAD,CAAOE,aAAcA,EAAcM,MAAOA,EAAOd,KAAMA,IACvDvB,EAAAC,EAAAC,cAAA,YAECsC,GAECxC,EAAAC,EAAAC,cAAA,OAAKC,UAAW,iBACdH,EAAAC,EAAAC,cAACqC,EAAD,CAAcC,MAAOA,aA1GA2B,IAAMC,WCFvCC,IAASC,OAAOtE,EAAAC,EAAAC,cAACqE,EAAD,MAASC,SAASC,eAAe","file":"static/js/main.a1b36115.chunk.js","sourcesContent":["import React from 'react';\nimport '../App/App.css';\nexport default function SelectDish(props) {\n  return (\n    <div className=\"menu\">\n      <form onSubmit={props.handleSubmit}>\n        {Object.keys(props.menu).map(course => {\n          return (\n            <fieldset key={course}>\n              <legend>{course.toUpperCase()}</legend>\n              {props.menu[course].map(dish => {\n                return (\n                  <div key={dish.id}>\n                    <label htmlFor={dish.id} key={dish.id}>\n                      <input\n                        className={dish.name}\n                        key={dish.id}\n                        name={course}\n                        value={dish.name}\n                        type=\"radio\"\n                        checked={props.areRadioChecked}\n                        onChange={props.handleRadio}\n                      />\n                      {dish.name}\n                    </label>\n                  </div>\n                );\n              })}\n            </fieldset>\n          );\n        })}\n        {props.user < 3 ? <button>Order</button> : null}\n      </form>\n    </div>\n  );\n}\n","export function formatPrice(pence) {\n  return pence.toLocaleString('en-GB', {\n    style: 'currency',\n    currency: 'GBP'\n  });\n}\n","import React from 'react';\nimport { formatPrice } from '../../helpers';\nexport default function Order(props) {\n  let total;\n  if (Object.keys(props.currentOrder).length !== 0) {\n    total = Object.values(props.currentOrder).reduce((total, value) => {\n      return total + value.price;\n    }, 0);\n  } else {\n    total = 0;\n  }\n\n  let totalForTwo = Object.values(props.order).reduce(\n    (total, value) =>\n      total +\n      Object.values(value).reduce((total, value) => {\n        return total + value.price;\n      }, 0),\n    0\n  );\n\n  return (\n    <React.Fragment>\n      <div>\n      {props.user < 3 ? <div className=\"current-order\"><h3>Order for Guest {props.user}</h3><label>{formatPrice(total)}</label> </div> : null}\n      \n      \n      </div>\n      <div className=\"final-order\">\n      <h3>Total amount</h3>\n      <label>{formatPrice(totalForTwo)}</label>\n      </div>\n    </React.Fragment>\n  );\n}\n\n","import React from 'react';\n\nexport default function ErrorMessage(props) {\n  \n    return <div className=\"message\">{props.error}</div>;\n  }\n","import React from 'react';\nimport data from '../../menu-data.json';\nimport SelectDish from '../SelectDish/SelectDish';\nimport Order from '../Order/Order';\nimport ErrorMessage from '../ErrorMessage/ErrorMessage';\nimport './App.css';\nexport default class App extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      menu: {},\n      user: 1,\n      currentOrder: {},\n      order: {},\n      error: false,\n      areRadioChecked: null\n    };\n  }\n\n  componentDidMount() {\n    this.setState({ menu: data });\n  }\n  changeRadio = () => {\n    this.setState({ areRadioChecked: null });\n  };\n\n  handleRadio = event => {\n    let course = event.target.name;\n    let meal = this.state.menu[course].find(\n      meal => meal.name === event.target.value\n    );\n    let currentOrder = this.state.currentOrder;\n    currentOrder[course] = meal;\n    this.setState({ currentOrder, error: false });\n  };\n\n  restaurantRules() {\n    let { currentOrder, error, user, order } = this.state;\n\n    let areTwoOrMoreOrdered = Object.keys(currentOrder).length < 2;\n    let isMainOrdered = !currentOrder.mains;\n   if(user === 2 && order[1].desserts && currentOrder.desserts) {\n      let isCheesecakeavailable =  (order[1].desserts.name === 'Cheesecake' && currentOrder.desserts.name === 'Cheesecake')\n        if (isCheesecakeavailable) {\n          error = 'We are sorry, but cheesecakes are out of stock'\n        }\n    }\n\n    else if (areTwoOrMoreOrdered) {\n      error = 'Please order at least two dishes';\n    } else if (isMainOrdered) {\n      error = 'Please order main dish';\n    } else if (currentOrder.starters && currentOrder.mains) {\n      const doesPierreApprove =\n        currentOrder.starters.name === 'Prawn cocktail' &&\n        currentOrder.mains.name === 'Salmon fillet';\n\n      if (doesPierreApprove) {\n        error = \"We are sorry, but you can't have Salmon fillet with prawn cocktail!\";\n      }\n    }\n\n    return error;\n  }\n\n  handleSubmit = event => {\n    event.preventDefault();\n    let { currentOrder, order, user } = this.state;\n    let error = this.restaurantRules();\n    if (error) {\n      currentOrder = {};\n    } else {\n      order[user] = currentOrder;\n      user += 1;\n    }\n\n    this.setState({\n      order,\n      currentOrder: {},\n      error,\n      user,\n      areRadioChecked: false\n    });\n    // Temporary workaround to uncheck radio buttons on form submit. \n    // Must be replaced with better solution to take full control of radio buttons' state.\n    if (user < 3) {setTimeout(() => { this.changeRadio()},0,1)}};\n\n  render() {\n    let {\n      menu,\n      areRadioChecked,\n      user,\n      order,\n      currentOrder,\n      error\n    } = this.state;\n    return (\n      <div className=\"App\">\n      <div className=\"interface\">\n        <SelectDish\n          menu={menu}\n          handleRadio={this.handleRadio}\n          handleSubmit={this.handleSubmit}\n          areRadioChecked={areRadioChecked}\n          user={user}\n        />\n        <Order currentOrder={currentOrder} order={order} user={user}/>\n        <br/>\n        </div>\n        {error && (\n         \n          <div className= \"error-message\">\n            <ErrorMessage error={error} />\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './Components/App/App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n"],"sourceRoot":""}